(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2e53768f"],{"0c5e":function(t,e,s){"use strict";var a=s("a5fa"),i=s.n(a);i.a},"9bfb":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title-bar"},[s("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),s("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},i=[];a._withStripped=!0;var r={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},o=r,l=(s("a675"),s("2877")),c=Object(l["a"])(o,a,i,!1,null,null,null);c.options.__file="TitleBar.vue";e["a"]=c.exports},a5fa:function(t,e,s){},a675:function(t,e,s){"use strict";var a=s("ca51"),i=s.n(a);i.a},a715:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mypage"},[s("TitleBar",{attrs:{titleTx:t.title}}),s("div",{staticClass:"myblock",staticStyle:{padding:"0px",flex:"1"}},[s("div",{staticStyle:{display:"flex","flex-direction":"column","border-bottom":"1px solid rgba(247, 241, 241, 0.726)"}},[s("div",{staticStyle:{display:"flex","justify-content":"space-around","padding-top":"10px","padding-bottom":"10px"}},[s("span",{style:"buyorder"===t.selectedTab?"color: #44566B;":"color: #6F7D8E;",on:{click:function(e){t.tabClick("buyorder")}}},[t._v(t._s(t.$t("buyorder")))]),s("span",{style:"sellorder"===t.selectedTab?"color: #44566B;":"color: #6F7D8E;",on:{click:function(e){t.tabClick("sellorder")}}},[t._v(t._s(t.$t("sellorder")))])]),s("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[s("div",{staticClass:"tab-line",style:"buyorder"===t.selectedTab?"background-color:#687788;":"background-color:transparent;"}),s("div",{staticClass:"tab-line",style:"sellorder"===t.selectedTab?"background-color:#687788;":"background-color:transparent;"})])]),s("div",{staticClass:"order-block"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"buyorder"===t.selectedTab,expression:"selectedTab==='buyorder'"}],staticClass:"order-list"},t._l(t.buyorders,function(e){return s("q-card",{key:e.index,staticClass:"otc-card",nativeOn:{click:function(s){t.buyCardClick(e)}}},[s("div",{staticClass:"card-item"},[s("span",{staticClass:"mytx-minor",staticStyle:{"align-self":"center"}},[t._v(t._s(t.util.convertUTCTimeToLocalTime(e.create_at)))]),s("span",{style:{color:3===e.status?"green":e.status<0?"red":"black"}},[t._v(t._s(t.showStatus("buy",e.status)))])]),s("div",{staticClass:"card-item"},[s("span",[t._v(t._s(t.$t("buyeth")))]),s("span",{staticClass:"mytx-minor"},[t._v(t._s(t.$t("amount"))+":"+t._s(e.amount))])]),s("div",{staticClass:"card-item"},[s("span",{staticClass:"mytx-minor"},[t._v(t._s(t.$t("orderno"))+"："+t._s(e.id))]),s("span",{staticClass:"mytx-minor"},[t._v(t._s(t.$t("unitprice"))+":"+t._s(e.buy_price))])]),s("div",{staticClass:"card-item",staticStyle:{"justify-content":"flex-end"}},[s("span",{staticStyle:{color:"black"}},[t._v(t._s(t.$t("totalprice"))+":"+t._s(e.value))])])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:"sellorder"===t.selectedTab,expression:"selectedTab==='sellorder'"}],staticClass:"order-list"},t._l(t.sellorders,function(e){return s("q-card",{key:e.index,staticClass:"otc-card",nativeOn:{click:function(s){t.sellCardClick(e)}}},[s("div",{staticClass:"card-item"},[s("span",{staticClass:"mytx-minor",staticStyle:{"align-self":"center"}},[t._v(t._s(t.util.convertUTCTimeToLocalTime(e.create_at)))]),s("span",{style:{color:3===e.status?"green":e.status<0?"red":"black"}},[t._v(t._s(t.showStatus("sell",e.status)))])]),s("div",{staticClass:"card-item"},[s("span",[t._v(t._s(t.$t("sellEth")))]),s("span",{staticClass:"mytx-minor"},[t._v(t._s(t.$t("amount"))+":"+t._s(e.amount))])]),s("div",{staticClass:"card-item"},[s("span",{staticClass:"mytx-minor"},[t._v(t._s(t.$t("orderno"))+"："+t._s(e.id))]),s("span",{staticClass:"mytx-minor"},[t._v(t._s(t.$t("unitprice"))+":"+t._s(e.buy_price))])]),s("div",{staticClass:"card-item",staticStyle:{"justify-content":"flex-end"}},[s("span",{staticStyle:{color:"black"}},[t._v(t._s(t.$t("totalprice"))+":"+t._s(e.value))])])])}))])])],1)},i=[];a._withStripped=!0;var r=s("9bfb"),o=s("a002"),l=s.n(o),c={components:{TitleBar:r["a"]},data:function(){return{title:this.$t("myorder"),selectedTab:"buyorder",sellorders:[],buyorders:[],curtconfirmOrder:""}},mounted:function(){var t=this;l.a.getItem("buyorders").then(function(e){null!==e&&(t.buyorders=JSON.parse(e))}),l.a.getItem("sellorders").then(function(e){null!==e&&(t.sellorders=JSON.parse(e))}),this.getBuyOrder(),this.getSellOrder()},methods:{showStatus:function(t,e){switch(e){case 0:return"buy"===t?this.$t("waitadrecept"):this.$t("waiturecept");case 1:return"buy"===t?this.$t("waitupay"):this.$t("wait4pay");case 2:return"buy"===t?this.$t("confirmpay"):this.$t("confirmpayu");case 3:return this.$t("finished2");case-1:case-2:return this.$t("alreadycanceled")}},getBuyOrder:function(){var t=this;this.$axios.get(this.global.apiconfig.otcbackapi+"/bought?buyer="+this.global.wallet.ethAddress,{headers:this.global.apiconfig.otcapiheader}).then(function(e){if(200===e.status&&0===e.data.code){if(0===e.data.data.rows.length)return;t.buyorders=e.data.data.rows,l.a.setItem("buyorders",JSON.stringify(t.buyorders))}})},getSellOrder:function(){var t=this;this.$axios.get(this.global.apiconfig.otcbackapi+"/bought?seller="+this.global.wallet.ethAddress,{headers:this.global.apiconfig.otcapiheader}).then(function(e){if(200===e.status&&0===e.data.code){if(0===e.data.data.rows.length)return;t.sellorders=e.data.data.rows,l.a.setItem("sellorders",JSON.stringify(t.sellorders))}})},tabClick:function(t){this.selectedTab=t},buyCardClick:function(t){this.$router.push({path:"/OrderDetail",query:{item:t,type:"buy"}})},sellCardClick:function(t){this.$router.push({path:"/OrderDetail",query:{item:t,type:"sell"}})},showPswdInputDialog:function(){var t=this;this.$q.dialog({message:this.$t("confirmOrdertip"),prompt:{model:"",type:"text"},ok:this.$t("ok"),cancel:this.$t("cancel"),color:"secondary"}).then(function(e){if(""===e)toast(t.$t("pswdnull"));else{t.$q.loading.show({message:t.$t("txsubmiting"),spinnerSize:50});var s=t.util.getWallet(t,e);t.doconfirmOrder(s)}}).catch(function(){})},doconfirmOrder:function(t){var e=this,s=this,a=this.global.otcContract.connect(t),i={value:ethers.utils.parseEther(this.investAmt+"")};a.confirmOrder(ethers.utils.parseEther(this.curtconfirmOrder.amount+""),this.curtconfirmOrder.value,i).then(function(t){console.log(t),s.$q.loading.hide(),s.util.showInfoDialog(s,t.hash,!0)}).catch(function(t){s.util.reprotError2Bmob(s,"confirmOrder",t,ethers.utils.parseEther(e.curtconfirmOrder.amount+"")+","+e.curtconfirmOrder.value+","+i.value),s.$q.loading.hide()})}},beforeDestroy:function(){}},n=c,d=(s("0c5e"),s("2877")),u=Object(d["a"])(n,a,i,!1,null,"b5a6c8ba",null);u.options.__file="MyOTCOrder.vue";e["default"]=u.exports},ca51:function(t,e,s){}}]);