(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2f1403ca"],{"071e":function(t,i,e){},"0d3c":function(t,i,e){},4272:function(t,i,e){},"5a46":function(t,i,e){"use strict";var a=e("4272"),s=e.n(a);s.a},"7ff3":function(t,i,e){"use strict";var a=e("8e8b"),s=e.n(a);s.a},"86c6":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"smitadpage",staticClass:"mypage"},[e("TitleBar",{attrs:{titleTx:t.title}}),e("div",{staticClass:"myblock"},[e("div",{staticClass:"smt-ipt-itm"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("adprice"))+"：")]),e("div",[e("span",{staticStyle:{color:"red"}},[e("b",[t._v(t._s(t.ethcny))])]),e("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),e("span",{staticStyle:{color:"#44566B"}},[t._v("CNY")])])]),e("div",{staticClass:"smt-ipt-itm"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("floatratio"))+"：")]),e("div",[e("span",[t._v(t._s(parseFloat(t.floatrate).toFixed(4)))]),e("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),e("span",{staticStyle:{color:"#44566B"}},[t._v("%")])])]),e("div",{staticClass:"smt-ipt-itm"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("overpriceset"))+"：")]),e("div",{staticClass:"smtad-yj"},[e("q-icon",{attrs:{name:"remove",color:"green"},nativeOn:{click:function(i){return t.yjratioSub(i)}}}),e("q-slider",{attrs:{color:"secondary",min:-50,max:50,label:""},model:{value:t.floatrate,callback:function(i){t.floatrate=i},expression:"floatrate"}}),e("q-icon",{attrs:{name:"add",color:"red"},nativeOn:{click:function(i){return t.yjratioAdd(i)}}})],1)]),e("div",{staticClass:"smt-ipt-itm"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("ucurtprice"))+"：")]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("q-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:t.yourprice,callback:function(i){t.yourprice=i},expression:"yourprice"}}),e("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),e("span",{staticStyle:{color:"#44566B"}},[t._v("CNY")])],1)]),e("div",{staticClass:"smt-ipt-itm"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("minprice"))+"：")]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("q-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:t.mylowest,callback:function(i){t.mylowest=i},expression:"mylowest"}}),e("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),e("span",{staticStyle:{color:"#44566B"}},[t._v("CNY")])],1)]),e("div",{staticClass:"smt-ipt-itm"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("adamt"))+"：")]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("q-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:t.tradeamt,callback:function(i){t.tradeamt=i},expression:"tradeamt"}}),e("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),e("span",{staticStyle:{color:"#44566B"}},[t._v("ETH")])],1)]),e("div",{staticClass:"smt-ipt-itm"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("singmin"))+"：")]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("q-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:t.singlemin,callback:function(i){t.singlemin=i},expression:"singlemin"}}),e("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),e("span",{staticStyle:{color:"#44566B"}},[t._v("ETH")])],1)]),e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("paymethod"))+"：")]),e("div",{staticStyle:{display:"flex","margin-top":"15px"}},[e("q-checkbox",{on:{input:t.alipayclick},model:{value:t.alipaychecked,callback:function(i){t.alipaychecked=i},expression:"alipaychecked"}}),e("img",{staticStyle:{height:"40px","margin-left":"5px"},attrs:{src:"statics/alipays.png"}}),e("q-checkbox",{staticStyle:{"margin-left":"20px"},on:{input:t.yinlianclick},model:{value:t.bankchecked,callback:function(i){t.bankchecked=i},expression:"bankchecked"}}),e("img",{staticStyle:{height:"40px","margin-left":"5px"},attrs:{src:"statics/bankcards.png"}}),e("q-checkbox",{staticStyle:{"margin-left":"20px"},on:{input:t.weixinclick},model:{value:t.wepaychecked,callback:function(i){t.wepaychecked=i},expression:"wepaychecked"}}),e("img",{staticStyle:{height:"40px","margin-left":"5px"},attrs:{src:"statics/wepay.png"}})],1)]),e("div",{staticStyle:{"margin-top":"20px","font-size":"13px",color:"#6F7D8E"},domProps:{innerHTML:t._s(t.$t("tradenote"))}}),e("q-btn",{staticStyle:{margin:"15px"},attrs:{rounded:"",label:"edit"===t.$route.query.from?t.$t("modifyandpub"):t.$t("smitad"),color:"primary"},on:{click:t.submitAD}})],1),e("SingleInputDialog",{attrs:{dialogData:t.singleInputData},on:{singleInputOk:t.singleInputOk}}),e("MutiInputDialog",{attrs:{dialogData:t.mutiInputDialog},on:{mutiInputOk:t.mutiInputOk}}),e("SetWePayCodeDialog",{attrs:{dialogData:t.setWepayDialogData}})],1)},s=[];a._withStripped=!0;e("c5f6");var o=e("9bfb"),n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-dialog",{on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(i){return e("div",{staticClass:"dialog-btn"},[t._e(),e("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.dialogData.ok},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(i){t.$set(t.dialogData,"show",i)},expression:"dialogData.show"}},[e("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.title))]),e("div",{attrs:{slot:"body"},slot:"body"},[e("q-input",{attrs:{placeholder:t.dialogData.placeholder},model:{value:t.text,callback:function(i){t.text=i},expression:"text"}})],1)])},l=[];n._withStripped=!0;e("96cf");var c=e("c973"),r=e.n(c),u={props:["dialogData"],data:function(){return{text:""}},methods:{onOk:function(){""!==this.text?(this.$emit("singleInputOk",this.text),this.dialogData.show=!1):toast(this.$t("nullinput"))},onCancel:function(){},onShow:function(){},onHide:function(){},choose:function(){var t=r()(regeneratorRuntime.mark(function t(i,e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(i,e){return t.apply(this,arguments)}}()}},h=u,p=(e("7ff3"),e("2877")),d=Object(p["a"])(h,n,l,!1,null,"354d1386",null);d.options.__file="SingleInputDialog.vue";var g=d.exports,m=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-dialog",{on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(i){return e("div",{staticClass:"dialog-btn"},[t._e(),e("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.dialogData.ok},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(i){t.$set(t.dialogData,"show",i)},expression:"dialogData.show"}},[e("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.title))]),e("div",{attrs:{slot:"body"},slot:"body"},[e("q-input",{attrs:{placeholder:t.dialogData.placeholder1,type:t.dialogData.type1},model:{value:t.text1,callback:function(i){t.text1=i},expression:"text1"}}),t.dialogData.show2?e("q-input",{attrs:{placeholder:t.dialogData.placeholder2},model:{value:t.text2,callback:function(i){t.text2=i},expression:"text2"}}):t._e()],1)])},f=[];m._withStripped=!0;e("7f7f");var y={props:["dialogData"],data:function(){return{text1:"",text2:""}},methods:{onOk:function(){""!==this.text1&&(!0!==this.dialogData.show2||""!==this.text2)?("namesell"===this.dialogData.from||"modifysellprice"===this.dialogData.from)&&this.text1>50?toast(this.$t("namesellmax")):(this.$emit("mutiInputOk",{v1:this.text1,v2:this.text2,v3:this.dialogData.from}),this.dialogData.show=!1):toast(this.$t("nullinput"))},onCancel:function(){},onShow:function(){},onHide:function(){},choose:function(){var t=r()(regeneratorRuntime.mark(function t(i,e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.name.length){t.next=4;break}this.$q.dialog({title:"Please specify your name!",message:"Can't buy tickets without knowing your name."}),t.next=7;break;case 4:return t.next=6,i();case 6:this.$q.notify("Ok ".concat(this.name,", going with ").concat(e));case 7:case"end":return t.stop()}},t,this)}));return function(i,e){return t.apply(this,arguments)}}()}},b=y,v=(e("c394"),Object(p["a"])(b,m,f,!1,null,"31f7d798",null));v.options.__file="MutiInputDialog.vue";var x=v.exports,w=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-dialog",{on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(i){return e("div",{staticClass:"dialog-btn"},[t._e(),e("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.$t("ok")},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(i){t.$set(t.dialogData,"show",i)},expression:"dialogData.show"}},[e("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.title))]),e("div",{attrs:{slot:"body"},slot:"body"},[e("span",[t._v("\n      请上传您的微信收款码（\n      "),e("span",{staticStyle:{color:"#3587F2"},on:{click:t.getwxCodetip}},[t._v("不知道如何获取收款码？点击查看")]),t._v("）\n    ")]),e("input",{staticStyle:{"margin-top":"10px"},attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChange}}),e("img",{directives:[{name:"show",rawName:"v-show",value:t.wximgShow,expression:"wximgShow"}],staticStyle:{"margin-top":"10px",width:"200px",height:"274px","align-self":"center"},attrs:{src:t.wximgsrc}})])])},k=[];w._withStripped=!0;var $={props:["dialogData"],data:function(){return{wximgsrc:"",wximgShow:!1,wximgbmobUrl:"",wximgfile:""}},methods:{getwxCodetip:function(){this.$q.dialog({message:"打开微信，依次点击【我】——【支付】——【收付款】，点击下方【二维码收款】，再点击【保存收款码】，然后回到ok0x，点击【选择文件】，选择刚才保存的收款码。",ok:!0})},onFileChange:function(t){var i=this,e=t.target.files||t.dataTransfer.files;if(e.length){var a=e[0];this.wximgfile=a;var s=new FileReader;s.readAsDataURL(a),s.onload=function(t){i.wximgsrc=t.target.result,i.wximgShow=!0}}},uploadimg2bmob:function(){this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50});var t=this;this.$axios.request({url:"https://api2.bmob.cn/2/files/"+this.global.wallet.ethAddress+".jpg",method:"post",headers:{"X-Bmob-Application-Id":this.global.apiconfig.bmobotcappid,"X-Bmob-REST-API-Key":this.global.apiconfig.bmobotcapikey,"Content-Type":"image/jpeg"},data:this.wximgfile}).then(function(i){200===i.status&&(t.wximgbmobUrl=i.data.url,t.submitinfo2bmob()),t.$q.loading.hide()}).catch(function(i){console.error(i),t.$q.loading.hide()})},submitinfo2bmob:function(){var t=this;this.$axios.put(this.global.apiconfig.BmobRestAPIUrl+"classes/login/"+this.global.user.objectId,{actualname:this.actualname,cardno:this.cardno,alipayno:this.alipayno,weixin:this.wximgbmobUrl,mobile:""===this.global.user.mobile?this.mobile:this.global.user.mobile},{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(i){t.$q.loading.hide(),200===i.status&&(toast(t.$t("setsuccess")),""!==t.wximgbmobUrl&&(t.global.user.weixin=t.wximgbmobUrl))})},onOk:function(){this.uploadimg2bmob(),this.dialogData.show=!1},onCancel:function(){},onShow:function(){},onHide:function(){}}},S=$,_=(e("b62f"),Object(p["a"])(S,w,k,!1,null,"74627f15",null));_.options.__file="SetWePayCodeDialog.vue";var D,q=_.exports,I={components:{TitleBar:o["a"],SingleInputDialog:g,MutiInputDialog:x,SetWePayCodeDialog:q},data:function(){return{title:this.$t("smitad"),tradeamt:this.$route.query.item.tradeamount,ethcny:"",floatrate:parseInt(this.$route.query.item.floatrate),mylowest:this.$route.query.item.lowestprice,bankchecked:""!==this.$route.query.item.cardno,alipaychecked:""!==this.$route.query.item.alipayno,wepaychecked:""!==this.$route.query.item.weixincodeUrl,singlemin:this.$route.query.item.singmin,singleInputData:{show:!1,ok:this.$t("ok"),title:this.$t("alipayno"),placeholder:""},mutiInputDialog:{show:!1,ok:this.$t("ok"),title:this.$t("setbankcardinfo"),placeholder1:this.$t("cardno"),show2:!1,type1:"text"},setWepayDialogData:{show:!1,title:this.$t("setwepayinfo")}}},computed:{yourprice:{get:function(){return Number(this.ethcny*(1+this.floatrate/100)).toFixed(4)},set:function(t){this.floatrate=parseFloat(100*(t/this.ethcny-1))}}},mounted:function(){var t=this;console.log(this.$route.query.item);var i=this;window.onresize=function(){var t=window.screen.height;i.$refs.smitadpage.style.height=t+"px",console.log(">>>>>>>>>"+t)},this.getETHPrice(),D=setInterval(function(){t.getETHPrice()},this.global.taskInterval)},methods:{mutiInputOk:function(t){this.updateLoginfo({cardno:t.v1},"mutiInputOk")},singleInputOk:function(t){this.updateLoginfo({alipayno:t},"singleInputOk")},updateLoginfo:function(t,i){var e=this;this.$axios.put(this.global.apiconfig.BmobRestAPIUrl+"classes/login/"+this.global.user.objectId,t,{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(a){console.log(a),200===a.status&&(toast(e.$t("setsuccess")),"singleInputOk"===i?e.global.user.alipayno=t.alipayno:e.global.user.cardno=t.cardno)})},alipayclick:function(){this.alipaychecked&&this.util.isEmpty(this.global.user.alipayno)&&(toast(this.$t("alipaynosettip")),this.singleInputData.show=!0)},yinlianclick:function(){this.bankchecked&&this.util.isEmpty(this.global.user.cardno)&&(toast(this.$t("cardnosettip")),this.mutiInputDialog.show=!0)},weixinclick:function(){this.wepaychecked&&this.util.isEmpty(this.global.user.weixin)&&(toast(this.$t("weixinnosettip")),this.setWepayDialogData.show=!0)},yjratioAdd:function(){this.floatrate++},yjratioSub:function(){this.floatrate--},getETHPrice:function(){var t=this,i="https://api.etherscan.io/api?module=stats&action=ethprice&apikey="+this.global.apiconfig.etherscanAPIKey;this.$axios.get(i).then(function(i){t.ethcny=Number(i.data.result.ethusd*parseFloat(t.global.bmobconfig.usdcny)).toFixed(4)}).catch(function(t){}).then(function(){})},submitAD:function(){if(!this.mylowest>0)toast(this.$t("minprice")+this.$t("fieldnull"));else if(!this.tradeamt>0)toast(this.$t("adamt")+this.$t("fieldnull"));else if(!this.singlemin>0)toast(this.$t("singmin")+this.$t("fieldnull"));else if(this.singlemin>this.yourprice)toast(this.$t("lowestpriceerror"));else if(this.bankchecked||this.alipaychecked||this.wepaychecked){if(this.alipaychecked&&this.util.isEmpty(this.global.user.alipayno))return toast(this.$t("alipaynosettip")),void(this.singleInputData.show=!0);if(this.bankchecked&&this.util.isEmpty(this.global.user.cardno))return toast(this.$t("cardnosettip")),void(this.mutiInputDialog.show=!0);if(this.wepaychecked&&this.util.isEmpty(this.global.user.weixin))return toast(this.$t("weixinnosettip")),void(this.setWepayDialogData.show=!0);this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50});var t={address:this.global.wallet.ethAddress,floatrate:this.floatrate+"",lowestprice:this.mylowest+"",tradeamount:this.tradeamt+"",singmin:this.singlemin+"",mobile:this.global.user.mobile,actualname:this.global.user.actualname,cardno:this.bankchecked?this.global.user.cardno:"",alipayno:this.alipaychecked?this.global.user.alipayno:"",weixincodeUrl:this.wepaychecked?this.global.user.weixin:"",ensname:this.global.user.ensname,status:"live"};"edit"===this.$route.query.from?this.modifyAD(t):this.addOne2Bmob(t)}else toast(this.$t("mustchooseonepay"))},modifyAD:function(t){var i=this;this.$axios.put(this.global.apiconfig.BmobRestAPIUrl+"classes/otcad/"+this.$route.query.item.objectId,t,{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(t){i.$q.loading.hide(),200===t.status&&(toast(i.$t("pubsuccess")),i.$router.go(-1))})},addOne2Bmob:function(t){var i=this;this.$axios.post(this.global.apiconfig.BmobRestAPIUrl+"classes/otcad",t,{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(t){i.$q.loading.hide(),console.log(t),201===t.status&&(toast(i.$t("pubsuccess")),i.$router.go(-1))})}},beforeDestroy:function(){clearInterval(D),this.$q.loading.hide()}},B=I,C=(e("5a46"),Object(p["a"])(B,a,s,!1,null,"f44610ac",null));C.options.__file="SubmitAD.vue";i["default"]=C.exports},"8e8b":function(t,i,e){},"9bfb":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"title-bar"},[e("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(i){return t.goBack(i)}}}),e("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},s=[];a._withStripped=!0;var o={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},n=o,l=(e("a675"),e("2877")),c=Object(l["a"])(n,a,s,!1,null,null,null);c.options.__file="TitleBar.vue";i["a"]=c.exports},a675:function(t,i,e){"use strict";var a=e("ca51"),s=e.n(a);s.a},b62f:function(t,i,e){"use strict";var a=e("0d3c"),s=e.n(a);s.a},c394:function(t,i,e){"use strict";var a=e("071e"),s=e.n(a);s.a},ca51:function(t,i,e){}}]);