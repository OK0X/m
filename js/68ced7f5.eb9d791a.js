(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["68ced7f5"],{"073d":function(t,a,e){},"3d2a":function(t,a,e){"use strict";var o=e("55ee"),i=e.n(o);i.a},"45ad":function(t,a,e){"use strict";var o=e("6dac"),i=e.n(o);i.a},"55ee":function(t,a,e){},"5b85":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mypage",staticStyle:{height:"calc(100vh - 65px)"}},[e("div",{staticClass:"otc-up"},[e("div",{staticClass:"pricetip"},[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("adprice"))+"：")]),e("div",{staticStyle:{"align-self":"center"}},[e("span",{staticStyle:{color:"#44566B"}},[e("b",[t._v(t._s(t.ethcny))])]),e("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),e("span",{staticStyle:{color:"#44566B"}},[t._v("CNY")])])]),e("div",{staticClass:"tr-btn"},[e("q-btn",{staticClass:"otc-btn",attrs:{flat:"",color:"primary",label:t.$t("myorder")},nativeOn:{click:function(a){return t.myorder(a)}}}),e("div",{staticClass:"porti-line"}),e("q-btn",{staticClass:"otc-btn",attrs:{flat:"",color:"primary",label:t.$t("myads")},nativeOn:{click:function(a){return t.myad(a)}}}),e("div",{staticClass:"porti-line"}),e("q-btn",{staticClass:"otc-btn",attrs:{flat:"",color:"primary",label:t.$t("smitad")},nativeOn:{click:function(a){return t.submitAd(a)}}})],1)]),e("div",{staticClass:"otc-down"},t._l(t.ads,function(a){return e("q-card",{key:a.index,staticClass:"otc-card",nativeOn:{click:function(e){t.cardClick(a)}}},[e("div",{staticClass:"card-item"},[e("span",{staticStyle:{color:"#3587F2","font-size":"22px"}},[t._v(t._s(a.ensname))]),e("span",{staticStyle:{color:"#44566B","font-size":"20px","align-self":"center"}},[t._v(t._s(t.getShowPrice(a.floatrate,a.lowestprice))+" CNY")])]),e("div",{staticClass:"card-item"},[e("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v(t._s(t.$t("monthtrade"))+":"+t._s(""===a.monthtrade?0:a.monthtrade))]),e("span",{staticStyle:{color:"#6f7d8e","font-size":"13px","align-self":"center"}},[t._v(t._s(t.$t("singmin"))+":"+t._s(a.singmin)+" ETH")])]),e("div",{staticClass:"card-item"},[e("div",{staticStyle:{"margin-top":"10px"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:""!==a.alipayno,expression:"item.alipayno!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/alipays.png"}}),e("img",{directives:[{name:"show",rawName:"v-show",value:""!==a.cardno,expression:"item.cardno!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/bankcards.png"}}),e("img",{directives:[{name:"show",rawName:"v-show",value:""!==a.weixincodeUrl,expression:"item.weixincodeUrl!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/wepay.png"}})]),e("span",{staticStyle:{color:"#6f7d8e","font-size":"13px","align-self":"center"}},[t._v(t._s(t.$t("adamt"))+":"+t._s(a.tradeamount)+" ETH")])])])})),e("CustomInfoDialog",{attrs:{dialogData:t.infodialog}}),e("OTCMakeOrderDialog",{attrs:{dialogData:t.otcDialogData},on:{makeOrder:t.makeOrder}}),e("SetMobileDialog",{attrs:{dialogData:t.setMobileDialogData}})],1)},i=[];o._withStripped=!0;e("6b54"),e("c5f6"),e("a002");var s=e("ef5a"),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(a){return e("div",{staticClass:"dialog-btn"},[e("q-btn",{attrs:{flat:"",label:t.$t("cancel")},on:{click:a.cancel}}),e("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.$t("makeorder")},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(a){t.$set(t.dialogData,"show",a)},expression:"dialogData.show"}},[e("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.$t("buyeth")))]),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticStyle:{display:"flex"}},[e("span",{staticStyle:{color:"#6f7d8e","font-size":"15px"}},[t._v(t._s(t.$t("buyprice"))+":")]),e("span",[e("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.dialogData.price))]),t._v(" \n        "),e("span",{staticStyle:{color:"#6f7d8e","font-size":"15px"}},[t._v("CNY/ETH")])])]),e("q-input",{attrs:{placeholder:t.$t("buyamt"),type:"number"},model:{value:t.buyAmount,callback:function(a){t.buyAmount=a},expression:"buyAmount"}}),e("div",{staticStyle:{color:"#6f7d8e","font-size":"15px","margin-top":"10px"}},[t._v(t._s(t.$t("payamt"))+": "+t._s(Number(t.buyAmount*t.dialogData.price).toFixed(2)))]),e("span",{staticStyle:{color:"#6f7d8e","font-size":"15px"}},[t._v(t._s(t.$t("paymethod"))+":")]),e("div",{staticStyle:{display:"flex","margin-top":"5px"}},[e("q-radio",{attrs:{val:"alipay",label:""},model:{value:t.paymethod,callback:function(a){t.paymethod=a},expression:"paymethod"}}),e("img",{directives:[{name:"show",rawName:"v-show",value:""!==t.dialogData.alipayno,expression:"dialogData.alipayno!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/alipays.png"}}),e("q-radio",{attrs:{val:"bankcard",label:""},model:{value:t.paymethod,callback:function(a){t.paymethod=a},expression:"paymethod"}}),e("img",{directives:[{name:"show",rawName:"v-show",value:""!==t.dialogData.cardno,expression:"dialogData.cardno!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/bankcards.png"}}),e("q-radio",{attrs:{val:"wepay",label:""},model:{value:t.paymethod,callback:function(a){t.paymethod=a},expression:"paymethod"}}),e("img",{directives:[{name:"show",rawName:"v-show",value:""!==t.dialogData.weixin,expression:"dialogData.weixin!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/wepay.png"}})],1),e("q-input",{attrs:{placeholder:t.$t("payaccount")},model:{value:t.payaccount,callback:function(a){t.payaccount=a},expression:"payaccount"}}),e("div",{staticStyle:{color:"#6f7d8e","font-size":"15px","margin-top":"5px"}},[t._v(t._s(t.$t("remark"))+": "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.dialogData.remarkNumber))])])],1)])},l=[];n._withStripped=!0;e("7f7f"),e("96cf");var c=e("c973"),r=e.n(c),d={props:["dialogData"],data:function(){return{buyAmount:"",payaccount:"",paymethod:""}},methods:{onOk:function(){this.buyAmount<this.dialogData.singmin?toast(this.$t("orderless")):this.buyAmount>this.global.bmobconfig.otcsingMax?toast(this.$t("ordermore")):""!==this.payaccount?""!==this.paymethod?(this.dialogData.buyamount=this.buyAmount,this.dialogData.payamount=Number(this.buyAmount*this.dialogData.price).toFixed(2),this.dialogData.payaccount=this.payaccount,this.dialogData.paymethod=this.paymethod,this.$emit("makeOrder",this.dialogData),this.dialogData.show=!1,this.buyAmount=""):toast(this.$t("paymethodnull")):toast(this.$t("fillpayaccount"))},onCancel:function(){},onShow:function(){},onHide:function(){},choose:function(){var t=r()(regeneratorRuntime.mark(function t(a,e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.name.length){t.next=4;break}this.$q.dialog({title:"Please specify your name!",message:"Can't buy tickets without knowing your name."}),t.next=7;break;case 4:return t.next=6,a();case 6:this.$q.notify("Ok ".concat(this.name,", going with ").concat(e));case 7:case"end":return t.stop()}},t,this)}));return function(a,e){return t.apply(this,arguments)}}()}},u=d,h=(e("45ad"),e("2877")),m=Object(h["a"])(u,n,l,!1,null,"7da45e0e",null);m.options.__file="OTCMakeOrderDialog.vue";var p=m.exports,g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(a){return e("div",{staticClass:"dialog-btn"},[e("q-btn",{attrs:{flat:"",label:t.$t("cancel")},on:{click:a.cancel}}),e("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.$t("ok")},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(a){t.$set(t.dialogData,"show",a)},expression:"dialogData.show"}},[e("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.title))]),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticStyle:{display:"flex","margin-top":"15px"}},[e("q-input",{staticStyle:{width:"50%"},attrs:{type:"number",placeholder:t.$t("mobile")},model:{value:t.mobile,callback:function(a){t.mobile=a},expression:"mobile"}}),e("q-btn",{attrs:{rounded:"",label:this.$t("sendsmscode")+t.smsbtnTx,color:"primary"},on:{click:t.sendsmscode}})],1),e("q-input",{attrs:{type:"number",placeholder:t.$t("smscode")},model:{value:t.smscode,callback:function(a){t.smscode=a},expression:"smscode"}})],1)])},b=[];g._withStripped=!0;var f={props:["dialogData"],data:function(){return{mobile:"",smscode:"",smsbtnTx:"",mcount:60}},methods:{smsBtnCountdown:function(){var t=this,a=setInterval(function(){t.smsbtnTx="("+t.mcount+"S)",t.mcount--,-1===t.mcount&&(t.mcount=60,t.smsbtnTx="",clearInterval(a))},1e3)},sendsmscode:function(){var t=this;/^1(3|4|5|7|8)\d{9}$/.test(this.mobile)?60===this.mcount?this.$axios.post(this.global.apiconfig.BmobRestAPIUrl+"requestSmsCode",{mobilePhoneNumber:this.mobile+"",template:"ok0x1"},{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(a){t.smsBtnCountdown()}):toast(this.$t("latersend")):toast(this.$t("mobilecheckfail"))},onOk:function(){""!==this.smscode?(this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50}),this.smscodecheck(),this.dialogData.show=!1):toast(this.$t("smsnull"))},smscodecheck:function(){var t=this;this.$axios.post(this.global.apiconfig.BmobRestAPIUrl+"verifySmsCode/"+this.smscode,{mobilePhoneNumber:this.mobile+""},{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(a){"ok"===a.data.msg&&t.submitinfo2bmob()}).catch(function(a){console.error(a),toast(t.$t("smscodeerror")),t.$q.loading.hide()})},submitinfo2bmob:function(){var t=this;this.$axios.put(this.global.apiconfig.BmobRestAPIUrl+"classes/login/"+this.global.user.objectId,{mobile:this.mobile+""},{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(a){t.$q.loading.hide(),200===a.status&&(t.global.user.mobile=t.mobile+"",toast(t.$t("setsuccess")))})},onCancel:function(){},onShow:function(){},onHide:function(){}}},y=f,v=(e("6a02"),Object(h["a"])(y,g,b,!1,null,"e9054b02",null));v.options.__file="SetMobileDialog.vue";var w=v.exports,x={components:{CustomInfoDialog:s["a"],OTCMakeOrderDialog:p,SetMobileDialog:w},data:function(){return{title:"SmartOTC",infodialog:{show:!1,vhtml:"",ok:this.$t("ok")},otcDialogData:{show:!1},ethcny:"",ads:this.global.otc.adlist,setMobileDialogData:{show:!1,title:this.$t("setmobile")}}},mounted:function(){var t=this;console.log("----otc mounted"),this.getETHPrice(),setInterval(function(){t.getETHPrice()},6e4),this.getAdList()},methods:{makeOrder:function(t){var a=this,e=this;this.$q.loading.show({message:e.$t("txsubmiting"),spinnerSize:50});var o={buyer:this.global.wallet.ethAddress,seller:t.address,amount:t.buyamount+"",value:parseFloat(Number(t.buyamount*t.price).toFixed(2))+"",status:0,buy_price:parseFloat(t.price)+"",seller_alipay_no:t.alipayno,seller_card_no:t.cardno,pay_account:t.payaccount,pay_method:t.paymethod,remark:t.remarkNumber,buyer_mobile:this.global.user.mobile,seller_mobile:t.mobile,weixin_code_url:t.weixincodeUrl,seller_actual_name:t.actualname};this.$axios.post(this.global.apiconfig.otcbackapi,o,{headers:this.global.apiconfig.otcapiheader}).then(function(t){e.$q.loading.hide(),console.log(t),200===t.status&&0===t.data.code&&(toast(e.$t("makerorderok")),o.create_at=t.headers.date,o.id=t.data.data.id,a.$router.push({path:"/OrderDetail",query:{item:o,type:"buy"}}))})},cardClick:function(t){if(""===this.global.user.mobile||"undefined"===typeof this.global.user.mobile)return toast(this.$t("mobilenotreg")),void(this.setMobileDialogData.show=!0);t.price=this.getShowPrice(t.floatrate,t.lowestprice),t.remarkNumber=Math.random().toString().slice(-6),this.otcDialogData=t,this.otcDialogData.show=!0},getShowPrice:function(t,a){var e=this.ethcny*(1+parseFloat(t)/100);return Number(e<a?a:e).toFixed(4)},getAdList:function(){var t=this,a={status:"live"};this.$axios.get(this.global.apiconfig.BmobRestAPIUrl+"classes/otcad?where="+encodeURI(JSON.stringify(a)),{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(a){200===a.status&&(t.ads=t.global.otc.adlist=a.data.results.reverse())})},myad:function(){this.$router.push({path:"/MyOTCAD",query:{ethcny:this.ethcny}})},myorder:function(){this.$router.push("/MyOTCOrder")},getETHPrice:function(){var t=this,a="https://api.etherscan.io/api?module=stats&action=ethprice&apikey="+this.global.apiconfig.etherscanAPIKey;this.$axios.get(a).then(function(a){t.ethcny=Number(a.data.result.ethusd*parseFloat(t.global.bmobconfig.usdcny)).toFixed(4)}).catch(function(t){}).then(function(){})},submitAd:function(){var t=this;""!==this.global.user.ensname?""!==this.global.user.cardno&&"undefined"!==typeof this.global.user.cardno||""!==this.global.user.alipayno&&"undefined"!==typeof this.global.user.alipayno||""!==this.global.user.weixin&&"undefined"!==typeof this.global.user.weixin?this.checkIsHaveAd():this.$q.dialog({message:this.$t("receiptinfo")}).then(function(){t.$router.push({path:"/SetPaymentInfo",query:{p1:""}})}).catch(function(){}):this.$q.dialog({message:this.$t("submitadnoensname")}).then(function(){t.$router.push({path:"/registeens",query:{p1:"otc"}})}).catch(function(){})},checkIsHaveAd:function(){var t=this,a={address:this.global.wallet.ethAddress,status:"live"};this.$axios.get(this.global.apiconfig.BmobRestAPIUrl+"classes/otcad?where="+encodeURI(JSON.stringify(a)),{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(a){console.log(a),200===a.status&&(0!==a.data.results.length?toast(t.$t("onlycanhave1ad")):t.$router.push({path:"/SubmitAD",query:{item:{tradeamount:"",floatrate:"0",lowestprice:"",cardno:"",alipayno:"",weixincodeUrl:"",singmin:""},from:"smartotc"}}))})}}},_=x,k=(e("3d2a"),Object(h["a"])(_,o,i,!1,null,"d4605074",null));k.options.__file="SmartOTC.vue";a["default"]=k.exports},"6a02":function(t,a,e){"use strict";var o=e("90bd"),i=e.n(o);i.a},"6dac":function(t,a,e){},"90bd":function(t,a,e){},b410:function(t,a,e){"use strict";var o=e("073d"),i=e.n(o);i.a},ef5a:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{attrs:{ok:t.dialogData.ok},on:{show:t.onShow,hide:t.onHide},model:{value:t.dialogData.show,callback:function(a){t.$set(t.dialogData,"show",a)},expression:"dialogData.show"}},[e("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.msg))]),e("div",{attrs:{slot:"body"},slot:"body"},[e("span",{staticClass:"cid-tx",domProps:{innerHTML:t._s(t.dialogData.vhtml)}})])])},i=[];o._withStripped=!0;e("96cf");var s=e("c973"),n=e.n(s),l={props:["dialogData"],data:function(){return{}},methods:{onOk:function(){this.dialogData.show=!1},onCancel:function(){},onShow:function(){},onHide:function(){},choose:function(){var t=n()(regeneratorRuntime.mark(function t(a,e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(a,e){return t.apply(this,arguments)}}()}},c=l,r=(e("b410"),e("2877")),d=Object(r["a"])(c,o,i,!1,null,"2b2a047c",null);d.options.__file="CustomInfoDialog.vue";a["a"]=d.exports}}]);