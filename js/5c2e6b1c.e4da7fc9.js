(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["5c2e6b1c"],{"1e1d":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-bar"},[!1!==t.showBack?e("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(a){return t.goBack(a)}}}):t._e(),e("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},i=[],n={props:["titleTx","showBack"],methods:{goBack:function(){this.$router.go(-1)}}},o=n,r=(e("5854"),e("2877")),l=Object(r["a"])(o,s,i,!1,null,null,null);a["a"]=l.exports},"2d59":function(t,a,e){"use strict";var s=e("c060"),i=e.n(s);i.a},"416d":function(t,a,e){"use strict";var s=e("f69d"),i=e.n(s);i.a},5854:function(t,a,e){"use strict";var s=e("b722"),i=e.n(s);i.a},"63d0":function(t,a,e){"use strict";e.r(a);var s,i,n,o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mypage"},[e("TitleBar",{attrs:{titleTx:"ETH"===t.$route.query.p1?"ETH":"ZRXT"}}),e("div",{staticClass:"up-part"},[e("span",{staticClass:"eth-amt"},[t._v(t._s(t.ethBalance))]),e("span",{staticClass:"eth-bal"},[t._v("=ï¿¥"+t._s(parseFloat(t.totalUSD).toFixed(4)))]),e("div",{staticClass:"tr-btn"},["ZRXT"===t.$route.query.p1?e("q-btn",{staticClass:"et-btn",attrs:{flat:"",color:"primary",label:t.$t("buy")},nativeOn:{click:function(a){return t.toBuyMcoin(a)}}}):t._e(),"ZRXT"===t.$route.query.p1?e("div",{staticClass:"porti-line"}):t._e(),e("q-btn",{staticClass:"et-btn",attrs:{flat:"",color:"primary",label:t.$t("receive")},nativeOn:{click:function(a){return t.toReceiveEth(a)}}}),e("div",{staticClass:"porti-line"}),e("q-btn",{staticClass:"et-btn",attrs:{flat:"",color:"primary",label:t.$t("send")},nativeOn:{click:function(a){return t.toTransferEth(a)}}})],1)]),e("div",{staticClass:"down-part"},[e("span",{staticClass:"transfer-tip"},[t._v(t._s(t.$t("trrecord")))]),e("div",{staticClass:"trans-log"},[e("q-list",{staticStyle:{width:"100%"},attrs:{highlight:"",separator:"","no-border":""}},t._l(t.transactions,(function(a){return e("q-item",{key:a.index,staticClass:"tx-item",attrs:{to:{path:"transferdetail",query:{item:a,coin:t.currentCoin}}}},[e("div",{staticClass:"addr-amt"},[e("span",{staticStyle:{"font-family":"PingFangSC-Semibold",color:"#44566B"}},[t._v(t._s(t.setAddress(a.from,a.to)))]),e("span",{style:{color:t.setAmtColor(a.to,a.txreceipt_status)}},[t._v(t._s(t.setAmt(a.to,a.value)))])]),e("span",{staticClass:"time"},[t._v(t._s(t.util.convertUTCTimeToLocalTime(1e3*a.timeStamp)))])])})),1)],1)]),e("custom-input-dialog-vue",{attrs:{dialogData:t.dialogData},on:{pressOK:t.pressOK}})],1)},r=[],l=(e("c5f6"),e("1e1d")),c=e("e7ea"),u=e("a002"),h=e.n(u),d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{model:{value:t.dialogData.show,callback:function(a){t.$set(t.dialogData,"show",a)},expression:"dialogData.show"}},[e("div",{staticClass:"mydialog"},[e("div",{staticClass:"text-h6",staticStyle:{"margin-left":"10px","margin-top":"10px"}},[t._v(t._s(t.dialogData.msg))]),e("div",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[e("q-input",{attrs:{dense:!0,type:"number",placeholder:"ethtrans"===t.dialogData.from?t.$t("inputbyamt"):"investDetail"===t.dialogData.from?t.$t("fillsellamt"):t.$t("drawamt")},model:{value:t.input1,callback:function(a){t.input1=a},expression:"input1"}}),e("q-input",{directives:[{name:"show",rawName:"v-show",value:"investDetail"===t.dialogData.from&&t.dialogData.isRepay&&t.input1>this.dialogData.currentCanSell,expression:"dialogData.from==='investDetail'&&dialogData.isRepay&& input1 > this.dialogData.currentCanSell"}],attrs:{dense:!0,type:"number"},model:{value:t.repayAmt,callback:function(a){t.repayAmt=a},expression:"repayAmt"}}),"investDetail"===t.dialogData.from?e("span",{staticStyle:{"font-size":"10px"}},[t._v(t._s(t.$t("needcmat"))+":"+t._s(parseFloat((.01*(t.input1+t.repayAmt)/t.global.otc.zrxtPrice).toFixed(10))))]):t._e(),"ethtrans"===t.dialogData.from?e("span",{staticStyle:{"font-size":"10px"}},[t._v(t._s(t.$t("cutprice"))+t._s(t.global.otc.zrxtPrice)+"ETH,"+t._s(t.$t("payethnum",{num:t.computeNeedETH})))]):t._e(),e("q-input",{attrs:{dense:!0,placeholder:t.$t("enterpswd")},model:{value:t.input2,callback:function(a){t.input2=a},expression:"input2"}})],1),e("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("cancel")}}),e("q-btn",{attrs:{flat:"",label:t.$t("ok")},on:{click:t.onOk}})],1)],1)])},p=[],g={props:["dialogData"],data:function(){return{input1:"investDetail"===this.dialogData.from?this.dialogData.canDrawAmt:"",input2:"",repayAmt:""}},computed:{computeNeedETH:function(){return parseFloat((this.input1*this.global.otc.zrxtPrice).toFixed(10))}},methods:{onOk:function(){""!==this.input1&&null!==this.input1?""!==this.input2?this.input2.length<6?toast(this.$t("pwsdless6")):"investDetail"===this.dialogData.from&&this.dialogData.isRepay&&this.input1>this.dialogData.currentCanSell&&this.repayAmt<this.dialogData.repayAmout?toast(this.$t("repayinsuffit")+this.dialogData.repayAmout):"referAwards"===this.dialogData.from&&this.input1>this.dialogData.referAwards?toast(this.$t("drawexceed")):"referAwards"===this.dialogData.from&&this.input1>this.dialogData.totalInvest?toast(this.$t("drawexdtalivst")):(this.$emit("pressOK",{v1:this.input1,v2:this.input2,v3:this.repayAmt,v4:this.computeNeedETH}),this.dialogData.show=!1):toast(this.$t("pswdnull")):toast(this.$t("numnull"))}}},f=g,m=(e("2d59"),e("2877")),b=Object(m["a"])(f,d,p,!1,null,"6aff6bec",null),v=b.exports,y=(e("b06b"),e("3452"),{props:["params"],components:{TitleBar:l["a"],CustomInputDialogVue:v},data:function(){return{title:"ETH",currentCoin:this.$route.query.p1,showBalance:this.$route.query.p2,transactions:[],showBuyDialog:!0,dialogData:{show:!1,msg:this.$t("buy")+"ZRXT",from:"ethtrans"},totalUSD:"0.0000"}},computed:{ethBalance:{get:function(){return this.$store.state.wallet.ethBlance},set:function(t){this.$store.commit("wallet/updateEthBalance",t)}}},created:function(){var t=this;"ETH"===this.$route.query.p1?h.a.getItem("historyTrans").then((function(a){null!==a&&(t.transactions=JSON.parse(a))})):h.a.getItem("historyTransMcoin").then((function(a){null!==a&&(t.transactions=JSON.parse(a))}))},methods:{pressOK:function(t){var a=this;if(String(t.v1).indexOf(".")>-1)toast(this.$t("buycmatonlysingle"));else{this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50});var e=this.util.getWallet(a,t.v2);this.buyMCoin(e,t)}},buyMCoin:function(t,a){var e=this,s=this.global.otcProxyContract.connect(t),i={value:c["ethers"].utils.parseEther(a.v4+""),gasPrice:c["ethers"].utils.bigNumberify(this.global.contractConfig.gasprice)};s.buyMCoin(c["ethers"].utils.parseEther(a.v1+""),i).then((function(t){e.$q.loading.hide(),e.util.showInfoDialog(e,t.hash,!1),e.util.listen4TxResult(e,t.hash,e.$t("buysuccess"),e.$t("buyfailed"))})).catch((function(t){e.util.reprotError2Bmob(e,"buyMCoin",t,a.v1+","+i.value),e.$q.loading.hide()}))},toBuyMcoin:function(){this.dialogData.show=!0},setAmtColor:function(t,a){return"0"===a?"red":t===this.global.wallet.ethAddress?"dodgerblue":"green"},toReceiveEth:function(){this.$router.push({path:"/receipteth",query:{p1:this.$route.query.p1}})},toTransferEth:function(){this.$router.push({path:"/transfereth",query:{p1:this.$route.query.p1}})},setAddress:function(t,a){return a===this.global.wallet.ethAddress?t.substring(0,7)+"..."+t.substring(t.length-7,t.length):a.substring(0,7)+"..."+a.substring(a.length-7,a.length)},setAmt:function(t,a){return t===this.global.wallet.ethAddress?"+"+Number(c["ethers"].utils.formatEther(a)).toFixed(4):"-"+Number(c["ethers"].utils.formatEther(a)).toFixed(4)},getEthTrans:function(){var t=this,a=this.global.apiconfig.etherscanio+"api?module=account&action=txlist&address="+this.global.wallet.ethAddress+"&startblock=0&endblock=99999999&page=1&offset=100&sort=desc&apikey="+this.global.apiconfig.etherscanAPIKey;this.$axios.get(a).then((function(a){t.transactions=a.data.result})).catch((function(t){console.error(t)})).then((function(){}))},getMcoinTrans:function(){var t=this,a=this.global.apiconfig.etherscanio+"api?module=account&action=tokentx&contractaddress="+this.global.contractConfig.tokenAddress+"&address="+this.global.wallet.ethAddress+"&page=1&offset=100&sort=desc&apikey="+this.global.apiconfig.etherscanAPIKey;this.$axios.get(a).then((function(a){t.transactions=a.data.result})).catch((function(t){})).then((function(){}))},setETHTask:function(){var t=this;i=setInterval((function(){t.getEthTrans()}),this.global.taskInterval)},setMcoinTask:function(){var t=this;n=setInterval((function(){t.getMcoinTrans()}),this.global.taskInterval)}},mounted:function(){"ETH"===this.$route.query.p1?(this.getEthTrans(),this.setETHTask(),this.totalUSD=Number(this.global.wallet.lastEthbalance*this.global.ethPrice).toFixed(4)):(this.getMcoinTrans(),this.setMcoinTask(),this.totalUSD=Number(this.global.otc.zrxtPrice*this.global.ethPrice*this.global.wallet.lastMcoinBalance).toFixed(4)),this.util.refreshGasPrice(this)},beforeDestroy:function(){clearInterval(n),clearInterval(s),clearInterval(i),"ETH"===this.currentCoin?h.a.setItem("historyTrans",JSON.stringify(this.transactions)):h.a.setItem("historyTransMcoin",JSON.stringify(this.transactions)),this.$q.loading.hide()}}),$=y,D=(e("416d"),Object(m["a"])($,o,r,!1,null,null,null));a["default"]=D.exports},b722:function(t,a,e){},c060:function(t,a,e){},f69d:function(t,a,e){}}]);